<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Magic Trick Lockscreen</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#202d44"/>
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="MagicLockscreen">
<link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3064/3064197.png">

<style>
body{
    margin:0;
    padding:0;
    height:100vh;
    width:100vw;
    background:url('https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=720&q=80') center center / cover no-repeat;
    font-family:'Segoe UI', Arial, sans-serif;
    overflow:hidden;
    position:relative;
}
.overlay{
    background:linear-gradient(120deg, rgba(30,40,80,0.48) 10%, rgba(10,18,35,0.8) 100%);
    position:absolute;
    top:0;left:0;right:0;bottom:0;
    z-index:1;
}
.lockscreen-container{
    position:absolute;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
    width:280px;
    text-align:center;
    z-index:2;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-end;
}
.pin-display{
    display:flex;
    justify-content:center;
    margin-bottom:12px;
    font-size:2rem;
    color:#fff;
    text-shadow:0 0 6px #002,0 0 2px #0ff6;
    letter-spacing:12px;
}
.pin-slot{
    width:28px;
    border-bottom:2px solid #4cfada55;
    text-align:center;
    min-height:36px;
    font-size:2rem;
}
.keypad{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:16px 18px;
    margin-top:20px;
    margin-bottom:0;
    width:100%;
    max-width:280px;
}
.key{
    background:rgba(255,255,255,0.19);
    color:#fff;
    border:none;
    border-radius:50%;
    height:58px;
    width:58px;
    font-size:1.6rem;
    box-shadow:0 2px 12px rgba(0,0,0,0.22);
    outline:none;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
    transition:0.2s;
}
.key:active,.key.clicked{
    background:radial-gradient(circle at 60% 40%,#33aaff44 0%,#fff2 100%);
    box-shadow:0 0 18px #00ffe5cc,0 2px 12px #000b;
    color:#88faff;
    transform:scale(0.95);
}
.key.cut{
    font-size:1.7rem;
}
.key.ok{
    background:#5a6fd6;
    color:#fff;
    font-size:1.15rem;
    font-weight:bold;
    letter-spacing:1px;
}
.key.ok:active,.key.ok.clicked{
    background:#7ed9ce;
    color:#202d44;
}
.actions{
    display:flex;
    justify-content:space-between;
    width:100%;
    color:#fff;
    font-size:1.1rem;
    opacity:0.8;
    margin-top:12px;
}
.status-msg{
    height:26px;
    margin-bottom:12px;
    color:#fe5050;
    font-weight:bold;
    text-shadow:0 1px 2px #000;
    font-size:1.1rem;
    text-align:center;
    min-height:20px;
}
.secret-dot{
    position:absolute;
    top:12px;
    right:17px;
    width:6px;
    height:6px;
    border-radius:50%;
    background:rgba(255,255,255,0.12);
    border:1px solid rgba(255,255,255,0.08);
    cursor:pointer;
    z-index:10;
    box-shadow:0 0 1px #000a;
}
.secret-dot:hover{
    background:rgba(255,255,255,0.2);
}
.reveal-popup{
    position:fixed;
    top:40px;
    right:22px;
    background:rgba(20,32,32,0.96);
    color:#fff;
    padding:14px 22px;
    border-radius:12px;
    box-shadow:0 4px 18px #000a;
    font-size:1.35rem;
    z-index:999;
    letter-spacing:4px;
    text-align:center;
    user-select:all;
    min-width:86px;
    display:none;
}
</style>
</head>
<body>
<div class="overlay"></div>
<div class="secret-dot" id="secretDot" title="Magic Dot"></div>
<div class="lockscreen-container">
    <div class="pin-display" id="pinDisplay"></div>
    <div class="status-msg" id="statusMsg"></div>
    <div class="keypad" id="keypad"></div>
    <div class="actions">
        <span id="emergencyBtn">EMERGENCY</span>
        <span id="backBtn">Back</span>
    </div>
</div>
<div class="reveal-popup" id="revealPopup">Secret PIN: <span id="revealedPin"></span></div>
<audio id="clickSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_115b9e1e5d.mp3" preload="auto"></audio>

<script>
let currentInput="",savedPin="";
const pinDisplay=document.getElementById('pinDisplay');
const statusMsg=document.getElementById('statusMsg');
const keypad=document.getElementById('keypad');
const revealPopup=document.getElementById('revealPopup');
const revealedPin=document.getElementById('revealedPin');
const secretDot=document.getElementById('secretDot');
const clickSound=document.getElementById('clickSound');

const keys=["1","2","3","4","5","6","7","8","9","CUT","0","OK"];

function updatePinDisplay(){
    pinDisplay.innerHTML="";
    for(let i=0;i<currentInput.length;i++){
        const span=document.createElement("span");
        span.className="pin-slot";
        span.textContent=currentInput[i];
        pinDisplay.appendChild(span);
    }
}

function renderKeypad(){
    keypad.innerHTML="";
    keys.forEach(k=>{
        let btn=document.createElement("button");
        btn.className="key";
        if(k==="CUT"){
            btn.classList.add("cut");
            btn.innerHTML="âŒ«";
            btn.title="Delete";
            btn.onclick=()=>{
                if(currentInput.length>0){
                    currentInput=currentInput.slice(0,-1);
                    updatePinDisplay();
                    statusMsg.textContent="";
                    playClick(btn);
                }
            };
        } else if(k==="OK"){
            btn.classList.add("ok");
            btn.innerHTML="OK";
            btn.title="OK";
            btn.onclick=onOkPress;
        } else {
            btn.innerHTML=k;
            btn.onclick=()=>{
                if(currentInput.length<6){
                    currentInput+=k;
                    updatePinDisplay();
                    statusMsg.textContent="";
                    playClick(btn);
                }
            };
        }
        keypad.appendChild(btn);
    });
}

function playClick(btn){
    btn.classList.add('clicked');
    setTimeout(()=>btn.classList.remove('clicked'),180);
    try{clickSound.currentTime=0;clickSound.play();}catch(e){}
    vibrate(33);
}

function onOkPress(e){
    playClick(e.target);
    if(currentInput.length<4){
        statusMsg.textContent="Enter 4-6 digit PIN";
        statusMsg.style.color="#ffe070";
        vibrate(120);
        return;
    }
    savedPin=currentInput;
    statusMsg.textContent="Wrong Password!";
    statusMsg.style.color="#fe5050";
    vibrate([80,60,80]);
    setTimeout(()=>{currentInput="";updatePinDisplay();},700);
}

let popupTimeout;
secretDot.onclick=function(){
    if(!savedPin){
        statusMsg.textContent="No PIN saved yet!";
        statusMsg.style.color="#ffe070";
        vibrate(60);
        return;
    }
    revealedPin.textContent=savedPin;
    revealPopup.style.display="block";
    clearTimeout(popupTimeout);
    popupTimeout=setTimeout(()=>{revealPopup.style.display="none";},3500);
}

document.getElementById('emergencyBtn').onclick=function(){
    statusMsg.textContent="Emergency call not implemented!";
    statusMsg.style.color="#ffe070";
    vibrate(60);
}
document.getElementById('backBtn').onclick=function(){
    currentInput="";
    updatePinDisplay();
    statusMsg.textContent="";
}

function vibrate(pattern){if(window.navigator.vibrate)window.navigator.vibrate(pattern);}

updatePinDisplay();
renderKeypad();
</script>
</body>
</html>
